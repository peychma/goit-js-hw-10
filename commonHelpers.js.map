{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const datePicker = document.getElementById(\"datetime-picker\");\n    const startButton = document.querySelector(\"[data-start]\");\n    const timerContainer = document.querySelector(\".timer\");\n    let userSelectedDate;\n    let countdownInterval;\n\n    const options = {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n            userSelectedDate = selectedDates[0];\n            validateSelectedDate();\n        },\n    };\n\n    function validateSelectedDate() {\n        const currentDate = new Date();\n        const isDateValid = userSelectedDate >= currentDate;\n        startButton.disabled = !isDateValid;\n        if (!isDateValid) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please choose a date in the future',\n            });\n        }\n    }\n\n    function startCountdown() {\n        countdownInterval = setInterval(updateTimer, 1000);\n    }\n\n    function updateTimer() {\n        const currentDate = new Date();\n        const timeDifference = Math.max(userSelectedDate - currentDate, 0);\n        if (timeDifference === 0) {\n            clearInterval(countdownInterval);\n            startButton.disabled = true;\n        }\n\n        const { days, hours, minutes, seconds } = convertMs(timeDifference);\n        updateTimerDisplay({ days, hours, minutes, seconds });\n    }\n\n    flatpickr(datePicker, options);\n\n    function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n        return { days, hours, minutes, seconds };\n    }\n\n    function updateTimerDisplay({ days, hours, minutes, seconds }) {\n        const formatTimeUnit = (timeUnit) => (timeUnit < 10 ? `0${timeUnit}` : timeUnit);\n        timerContainer.querySelector(\"[data-days]\").textContent = formatTimeUnit(days);\n        timerContainer.querySelector(\"[data-hours]\").textContent = formatTimeUnit(hours);\n        timerContainer.querySelector(\"[data-minutes]\").textContent = formatTimeUnit(minutes);\n        timerContainer.querySelector(\"[data-seconds]\").textContent = formatTimeUnit(seconds);\n    }\n\n    startButton.addEventListener(\"click\", function () {\n        startCountdown();\n        startButton.disabled = true;\n    });\n});\n"],"names":["datePicker","startButton","timerContainer","userSelectedDate","countdownInterval","options","selectedDates","validateSelectedDate","currentDate","isDateValid","iziToast","startCountdown","updateTimer","timeDifference","days","hours","minutes","seconds","convertMs","updateTimerDisplay","flatpickr","ms","formatTimeUnit","timeUnit"],"mappings":"0FAKA,SAAS,iBAAiB,mBAAoB,UAAY,CACtD,MAAMA,EAAa,SAAS,eAAe,iBAAiB,EACtDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAiB,SAAS,cAAc,QAAQ,EACtD,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAmBG,EAAc,GACjCC,GACH,CACT,EAEI,SAASA,GAAuB,CAC5B,MAAMC,EAAc,IAAI,KAClBC,EAAcN,GAAoBK,EACxCP,EAAY,SAAW,CAACQ,EACnBA,GACDC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACzB,CAAa,CAER,CAED,SAASC,GAAiB,CACtBP,EAAoB,YAAYQ,EAAa,GAAI,CACpD,CAED,SAASA,GAAc,CACnB,MAAMJ,EAAc,IAAI,KAClBK,EAAiB,KAAK,IAAIV,EAAmBK,EAAa,CAAC,EAC7DK,IAAmB,IACnB,cAAcT,CAAiB,EAC/BH,EAAY,SAAW,IAG3B,KAAM,CAAE,KAAAa,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAc,EAClEM,EAAmB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CACvD,CAEDG,EAAUpB,EAAYK,CAAO,EAE7B,SAASa,EAAUG,EAAI,CAKnB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAED,SAASE,EAAmB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC3D,MAAMK,EAAkBC,GAAcA,EAAW,GAAK,IAAIA,IAAaA,EACvErB,EAAe,cAAc,aAAa,EAAE,YAAcoB,EAAeR,CAAI,EAC7EZ,EAAe,cAAc,cAAc,EAAE,YAAcoB,EAAeP,CAAK,EAC/Eb,EAAe,cAAc,gBAAgB,EAAE,YAAcoB,EAAeN,CAAO,EACnFd,EAAe,cAAc,gBAAgB,EAAE,YAAcoB,EAAeL,CAAO,CACtF,CAEDhB,EAAY,iBAAiB,QAAS,UAAY,CAC9CU,IACAV,EAAY,SAAW,EAC/B,CAAK,CACL,CAAC"}